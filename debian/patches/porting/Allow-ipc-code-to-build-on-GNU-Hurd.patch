From: Mike Hommey <mh@glandium.org>
Date: Fri, 5 Aug 2011 11:24:58 +0200
Subject: Allow ipc code to build on GNU/Hurd

---
 ipc/chromium/src/base/debug_util_posix.cc         |    1 -
 ipc/chromium/src/base/third_party/nspr/prcpucfg.h |    2 +-
 ipc/chromium/src/build/build_config.h             |    2 +-
 3 files changed, 2 insertions(+), 3 deletions(-)

diff --git a/ipc/chromium/src/base/debug_util_posix.cc b/ipc/chromium/src/base/debug_util_posix.cc
index ed9ad4f..30f6b42 100644
--- a/ipc/chromium/src/base/debug_util_posix.cc
+++ b/ipc/chromium/src/base/debug_util_posix.cc
@@ -13,7 +13,6 @@
 #include <unistd.h>
 #ifndef ANDROID
 #include <execinfo.h>
-#include <sys/sysctl.h>
 #endif
 
 #include "base/basictypes.h"
diff --git a/ipc/chromium/src/base/third_party/nspr/prcpucfg.h b/ipc/chromium/src/base/third_party/nspr/prcpucfg.h
index 54fc498..4556481 100644
--- a/ipc/chromium/src/base/third_party/nspr/prcpucfg.h
+++ b/ipc/chromium/src/base/third_party/nspr/prcpucfg.h
@@ -34,7 +34,7 @@
 #include "base/third_party/nspr/prcpucfg_win.h"
 #elif defined(__APPLE__)
 #include "base/third_party/nspr/prcpucfg_mac.h"
-#elif defined(__linux__) || defined(ANDROID) || defined(__GLIBC__)
+#elif defined(__linux__) || defined(ANDROID) || defined(__GLIBC__) || defined(__GNU__)
 #include "base/third_party/nspr/prcpucfg_linux.h"
 #else
 #error Provide a prcpucfg.h appropriate for your platform
diff --git a/ipc/chromium/src/build/build_config.h b/ipc/chromium/src/build/build_config.h
index 26360e1..e22c2f2 100644
--- a/ipc/chromium/src/build/build_config.h
+++ b/ipc/chromium/src/build/build_config.h
@@ -17,7 +17,7 @@
 // A set of macros to use for platform detection.
 #if defined(__APPLE__)
 #define OS_MACOSX 1
-#elif defined(__linux__) || defined(ANDROID) || defined(__GLIBC__)
+#elif defined(__linux__) || defined(ANDROID) || defined(__GLIBC__) || defined(__GNU__)
 #define OS_LINUX 1
 #elif defined(_WIN32)
 #define OS_WIN 1
