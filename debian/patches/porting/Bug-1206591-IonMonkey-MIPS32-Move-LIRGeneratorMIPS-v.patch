From: Heiher <r@hev.cc>
Date: Tue, 22 Sep 2015 00:32:17 +0800
Subject: Bug 1206591 - IonMonkey: MIPS32: Move LIRGeneratorMIPS::visitRandom
 to architecture-specific. r=arai

---
 js/src/jit/mips-shared/Lowering-mips-shared.cpp | 11 -----------
 js/src/jit/mips-shared/Lowering-mips-shared.h   |  1 -
 js/src/jit/mips32/Lowering-mips32.h             |  1 +
 3 files changed, 1 insertion(+), 12 deletions(-)

diff --git a/js/src/jit/mips-shared/Lowering-mips-shared.cpp b/js/src/jit/mips-shared/Lowering-mips-shared.cpp
index 45b26a8..4d52e0a 100644
--- a/js/src/jit/mips-shared/Lowering-mips-shared.cpp
+++ b/js/src/jit/mips-shared/Lowering-mips-shared.cpp
@@ -411,14 +411,3 @@ LIRGeneratorMIPSShared::visitAtomicTypedArrayElementBinop(MAtomicTypedArrayEleme
 {
     MOZ_CRASH("NYI");
 }
-
-void
-LIRGeneratorMIPSShared::visitRandom(MRandom* ins)
-{
-    LRandom *lir = new(alloc()) LRandom(temp(),
-                                        temp(),
-                                        temp(),
-                                        temp(),
-                                        temp());
-    defineFixed(lir, ins, LFloatReg(ReturnDoubleReg));
-}
diff --git a/js/src/jit/mips-shared/Lowering-mips-shared.h b/js/src/jit/mips-shared/Lowering-mips-shared.h
index adc1c85..847cb67 100644
--- a/js/src/jit/mips-shared/Lowering-mips-shared.h
+++ b/js/src/jit/mips-shared/Lowering-mips-shared.h
@@ -89,7 +89,6 @@ class LIRGeneratorMIPSShared : public LIRGeneratorShared
     void visitAtomicExchangeTypedArrayElement(MAtomicExchangeTypedArrayElement* ins);
     void visitAtomicTypedArrayElementBinop(MAtomicTypedArrayElementBinop* ins);
     void visitSubstr(MSubstr* ins);
-    void visitRandom(MRandom* ins);
 };
 
 } // namespace jit
diff --git a/js/src/jit/mips32/Lowering-mips32.h b/js/src/jit/mips32/Lowering-mips32.h
index eced5aa..2871e83 100644
--- a/js/src/jit/mips32/Lowering-mips32.h
+++ b/js/src/jit/mips32/Lowering-mips32.h
@@ -39,6 +39,7 @@ class LIRGeneratorMIPS : public LIRGeneratorMIPSShared
     void visitBox(MBox* box);
     void visitUnbox(MUnbox* unbox);
     void visitReturn(MReturn* ret);
+    void visitRandom(MRandom* ins);
 };
 
 typedef LIRGeneratorMIPS LIRGeneratorSpecific;
