From: Mike Hommey <mh@glandium.org>
Date: Fri, 26 Feb 2010 15:51:52 +0100
Subject: DESTDIR support in js/src/Makefile.in

https://bugzilla.mozilla.org/show_bug.cgi?id=482747
+ nanojit specific change
---
 js/src/Makefile.in |   14 +++++++-------
 1 files changed, 7 insertions(+), 7 deletions(-)

diff --git a/js/src/Makefile.in b/js/src/Makefile.in
index a3caa58..1c75fea 100644
--- a/js/src/Makefile.in
+++ b/js/src/Makefile.in
@@ -608,27 +608,27 @@ export:: $(filter nanojit/%,$(INSTALLED_HEADERS))
 	$(INSTALL) $(IFLAGS1) $^ $(PUBLIC)/nanojit
 
 install:: $(filter nanojit/%,$(INSTALLED_HEADERS))
-	$(SYSINSTALL) $(IFLAGS1) $^ $(includedir)/$(MODULE)/nanojit
+	$(SYSINSTALL) $(IFLAGS1) $^ $(DESTDIR)$(includedir)/$(MODULE)/nanojit
 endif
 
 install:: $(filter-out nanojit/%,$(INSTALLED_HEADERS))
-	$(SYSINSTALL) $(IFLAGS1) $^ $(includedir)/$(MODULE)
+	$(SYSINSTALL) $(IFLAGS1) $^ $(DESTDIR)$(includedir)/$(MODULE)
 
 install:: $(SCRIPTS)
-	$(SYSINSTALL) $(IFLAGS2) $^ $(bindir)
+	$(SYSINSTALL) $(IFLAGS2) $^ $(DESTDIR)$(bindir)
 
 install:: $(LIBRARY) $(SHARED_LIBRARY) $(IMPORT_LIBRARY)
 ifneq (,$(LIBRARY))
-	$(SYSINSTALL) $(IFLAGS1) $(LIBRARY) $(libdir)
+	$(SYSINSTALL) $(IFLAGS1) $(LIBRARY) $(DESTDIR)$(libdir)
 endif
 ifneq (,$(SHARED_LIBRARY))
-	$(SYSINSTALL) $(IFLAGS2) $(SHARED_LIBRARY) $(libdir)
+	$(SYSINSTALL) $(IFLAGS2) $(SHARED_LIBRARY) $(DESTDIR)$(libdir)
 ifneq (,$(UNVERSIONED_LIBRARY))
-	ln -s $(SHARED_LIBRARY) $(libdir)/$(UNVERSIONED_LIBRARY)
+	ln -s $(SHARED_LIBRARY) $(DESTDIR)$(libdir)/$(UNVERSIONED_LIBRARY)
 endif
 endif
 ifneq (,$(IMPORT_LIBRARY))
-	$(SYSINSTALL) $(IFLAGS2) $(IMPORT_LIBRARY) $(libdir)
+	$(SYSINSTALL) $(IFLAGS2) $(IMPORT_LIBRARY) $(DESTDIR)$(libdir)
 endif
 
 # Extra dependancies and rules for auto-generated headers
