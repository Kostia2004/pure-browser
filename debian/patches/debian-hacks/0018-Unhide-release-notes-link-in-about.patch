From 838c8e33301e2890862c112605090690db68b7e1 Mon Sep 17 00:00:00 2001
From: Mike Hommey <glandium@debian.org>
Date: Sat, 24 May 2008 11:10:35 +0200
Subject: [PATCH 18/44] Unhide release notes link in about:

but only if app.releaseNotesURL is defined.
---
 toolkit/content/about.xhtml |    8 +++++---
 1 files changed, 5 insertions(+), 3 deletions(-)

diff --git a/toolkit/content/about.xhtml b/toolkit/content/about.xhtml
index 02d257f..4e9d0cd 100644
--- a/toolkit/content/about.xhtml
+++ b/toolkit/content/about.xhtml
@@ -68,9 +68,7 @@
   <ul id="aboutPageList">
     <li>&about.copy.beforeLink; <a href="about:credits">&about.copy.linkTitle;</a> &about.copy.afterLink;</li>
     <li>&about.license.beforeLink; <a href="about:license">&about.license.linkTitle;</a> &about.license.afterLink;</li>
-    <!-- Release notes link removed pending fix for bug 349985
     <li>&about.relnotes.beforeLink; <a id="releaseNotesURL" href="">&about.relnotes.linkTitle;</a> &about.relnotes.afterLink;</li>
-    -->
     <li>&about.buildconfig.beforeLink; <a href="about:buildconfig">&about.buildconfig.linkTitle;</a> &about.buildconfig.afterLink;</li>
     <script type="application/javascript">
       // get release notes URL from prefs
@@ -79,7 +77,11 @@
                                   .getService(Components.interfaces.nsIURLFormatter);
         var releaseNotesURL = formatter.formatURLPref("app.releaseNotesURL");
         var relnotes = document.getElementById("releaseNotesURL");
-        relnotes.setAttribute("href", releaseNotesURL);
+        if (releaseNotesURL == "about:blank") {
+          relnotes.parentNode.style.display = "none";
+        } else {
+          relnotes.setAttribute("href", releaseNotesURL);
+        }
 
         var vendorURL = formatter.formatURLPref("app.vendorURL");
         var vendor = document.getElementById("vendorURL");
-- 
1.7.0.rc0.69.g2ee80

