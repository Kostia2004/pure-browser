From 354b192b721ff57659bf22fb22fd654d5d917e35 Mon Sep 17 00:00:00 2001
From: Mike Hommey <mh@glandium.org>
Date: Tue, 26 Jan 2010 14:00:18 +0100
Subject: [PATCH 30/45] Avoid extension manager failure when there is no branding (like in the testsuite)

Workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=455238
---
 .../extensions/src/nsExtensionManager.js.in        |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/toolkit/mozapps/extensions/src/nsExtensionManager.js.in b/toolkit/mozapps/extensions/src/nsExtensionManager.js.in
index 8a2facc..6f23c57 100644
--- a/toolkit/mozapps/extensions/src/nsExtensionManager.js.in
+++ b/toolkit/mozapps/extensions/src/nsExtensionManager.js.in
@@ -226,8 +226,10 @@ var BundleManager = {
    */
   get appName() {
     if (!this._appName) {
-      var brandBundle = this.getBundle(URI_BRAND_PROPERTIES)
-      this._appName = brandBundle.GetStringFromName("brandShortName");
+      try {
+        var brandBundle = this.getBundle(URI_BRAND_PROPERTIES)
+        this._appName = brandBundle.GetStringFromName("brandShortName");
+      } catch(e) {}
     }
     return this._appName;
   }
-- 
1.7.0.rc0.69.g2ee80

