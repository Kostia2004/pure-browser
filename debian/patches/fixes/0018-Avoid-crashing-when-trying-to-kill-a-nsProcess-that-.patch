From b234a86a255926dce9f6097ccc2dbd7a25ce26ff Mon Sep 17 00:00:00 2001
From: Mike Hommey <mh@glandium.org>
Date: Mon, 1 Feb 2010 13:31:52 +0100
Subject: [PATCH 18/30] Avoid crashing when trying to kill a nsProcess that is already terminated

https://bugzilla.mozilla.org/show_bug.cgi?id=543441
---
 xpcom/threads/nsProcessCommon.cpp |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/xpcom/threads/nsProcessCommon.cpp b/xpcom/threads/nsProcessCommon.cpp
index de12bc4..ed03e0c 100644
--- a/xpcom/threads/nsProcessCommon.cpp
+++ b/xpcom/threads/nsProcessCommon.cpp
@@ -507,7 +507,7 @@ nsProcess::GetProcessSignature(PRUint32 *aProcessSignature)
 NS_IMETHODIMP
 nsProcess::Kill()
 {
-    if (!mThread)
+    if (!mThread || !mProcess)
         return NS_ERROR_FAILURE;
 
     {
-- 
1.7.0.rc0.69.g2ee80

