From: Mike Hommey <mh+mozilla@glandium.org>
Date: Thu, 14 Jul 2011 18:05:23 +0200
Subject: Bug 671570 - Cleanup temporary files from test_iniProcessor.js

---
 xpcom/tests/unit/test_iniProcessor.js |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/xpcom/tests/unit/test_iniProcessor.js b/xpcom/tests/unit/test_iniProcessor.js
index 77b5631..866ddde 100644
--- a/xpcom/tests/unit/test_iniProcessor.js
+++ b/xpcom/tests/unit/test_iniProcessor.js
@@ -117,6 +117,8 @@ for (testnum = 1; testnum <= 15; testnum++) {
     // read new file and make sure the contents are the same.
     parser = parserForFile(newfilename);
     checkParserOutput(parser, testdata[testnum - 1].reference);
+    // cleanup after the test
+    newfile.remove(false);
 }
 
 /* ========== 16 ========== */
@@ -143,6 +145,8 @@ checkParserOutput(parser, {section: {key: "value"} });
 // read it in again, check for same data.
 parser = parserForFile("data/nonexistent-file.ini");
 checkParserOutput(parser, {section: {key: "value"} });
+// cleanup after the test
+newfile.remove(false);
 
 /* ========== 17 ========== */
 
