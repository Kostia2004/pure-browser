From: Mike Hommey <glandium@debian.org>
Date: Fri, 7 May 2010 15:13:10 +0200
Subject: Make sure to call OnStartRequest even if we're failing on an SSL CONNECT

https://bugzilla.mozilla.org/show_bug.cgi?id=561536
Closes: #553635
---
 netwerk/protocol/http/src/nsHttpChannel.cpp |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/netwerk/protocol/http/src/nsHttpChannel.cpp b/netwerk/protocol/http/src/nsHttpChannel.cpp
index ff163f8..dcd0a57 100644
--- a/netwerk/protocol/http/src/nsHttpChannel.cpp
+++ b/netwerk/protocol/http/src/nsHttpChannel.cpp
@@ -948,6 +948,7 @@ nsHttpChannel::ProcessFailedSSLConnect(PRUint32 httpStatus)
     LOG(("Cancelling failed SSL proxy connection [this=%p httpStatus=%u]\n",
          this, httpStatus)); 
     Cancel(rv);
+    CallOnStartRequest();
     return rv;
 }
 
