From: Mike Hommey <mh+mozilla@glandium.org>
Date: Tue, 11 Oct 2011 08:41:47 +0200
Subject: Bug 686283 - Properly handle EOF in
 TokenStream::getAtSourceMappingURL on platforms with unsigned
 chars. r=luke,a=blassey

---
 js/src/jsscan.cpp |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

diff --git a/js/src/jsscan.cpp b/js/src/jsscan.cpp
index 338147b..0514c6d 100644
--- a/js/src/jsscan.cpp
+++ b/js/src/jsscan.cpp
@@ -1224,8 +1224,7 @@ TokenStream::getAtSourceMappingURL()
 
         jschar c;
         while (!IsSpaceOrBOM2((c = getChar())) &&
-               ((char) c) != '\0' &&
-               ((char) c) != EOF)
+               c && c != jschar(EOF))
             tokenbuf.append(c);
 
         if (tokenbuf.empty())
