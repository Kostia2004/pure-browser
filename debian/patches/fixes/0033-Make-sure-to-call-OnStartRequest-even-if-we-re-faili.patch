From d2e5f07d48f2f10749a19c5aaf760d54330ca943 Mon Sep 17 00:00:00 2001
From: Mike Hommey <glandium@debian.org>
Date: Fri, 7 May 2010 15:13:10 +0200
Subject: Make sure to call OnStartRequest even if we're failing on an SSL CONNECT

https://bugzilla.mozilla.org/show_bug.cgi?id=561536
Closes: #553635
---
 netwerk/protocol/http/src/nsHttpChannel.cpp |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/netwerk/protocol/http/src/nsHttpChannel.cpp b/netwerk/protocol/http/src/nsHttpChannel.cpp
index a9cf7c8..052b13c 100644
--- a/netwerk/protocol/http/src/nsHttpChannel.cpp
+++ b/netwerk/protocol/http/src/nsHttpChannel.cpp
@@ -945,6 +945,7 @@ nsHttpChannel::ProcessFailedSSLConnect(PRUint32 httpStatus)
     LOG(("Cancelling failed SSL proxy connection [this=%x httpStatus=%u]\n",
          this, httpStatus)); 
     Cancel(rv);
+    CallOnStartRequest();
     return rv;
 }
 
-- 
1.7.1.rc1.280.g493d5

