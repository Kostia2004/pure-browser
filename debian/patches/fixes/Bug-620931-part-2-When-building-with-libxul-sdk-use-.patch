From: Mike Hommey <mh@glandium.org>
Date: Fri, 25 Feb 2011 12:49:19 +0100
Subject: Bug 620931 part 2 - When building --with-libxul-sdk, use the right
 preferences directory

---
 browser/locales/Makefile.in           |    2 +-
 toolkit/mozapps/installer/packager.mk |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/browser/locales/Makefile.in b/browser/locales/Makefile.in
index c48180b..ce6ebaa 100644
--- a/browser/locales/Makefile.in
+++ b/browser/locales/Makefile.in
@@ -188,7 +188,7 @@ libs-%:
 	@$(MAKE) -C ../../toolkit/locales libs-$* BOTH_MANIFESTS=1
 	@$(MAKE) -C ../../services/sync/locales AB_CD=$* XPI_NAME=locale-$* BOTH_MANIFESTS=1
 	@$(MAKE) -C ../../extensions/spellcheck/locales AB_CD=$* XPI_NAME=locale-$* BOTH_MANIFESTS=1
-	@$(MAKE) libs AB_CD=$* XPI_NAME=locale-$* PREF_DIR=defaults/pref BOTH_MANIFESTS=1
+	@$(MAKE) libs AB_CD=$* XPI_NAME=locale-$* PREF_DIR=$(PREF_DIR) BOTH_MANIFESTS=1
 	@$(MAKE) -C $(DEPTH)/$(MOZ_BRANDING_DIRECTORY)/locales AB_CD=$* XPI_NAME=locale-$* BOTH_MANIFESTS=1
 
 
diff --git a/toolkit/mozapps/installer/packager.mk b/toolkit/mozapps/installer/packager.mk
index 5583d0b..8cf7c38 100644
--- a/toolkit/mozapps/installer/packager.mk
+++ b/toolkit/mozapps/installer/packager.mk
@@ -312,7 +312,7 @@ OMNIJAR_FILES	= \
 
 NON_OMNIJAR_FILES += \
   chrome/icons/\* \
-  defaults/pref/channel-prefs.js \
+  $(PREF_DIR)/channel-prefs.js \
   res/cursors/\* \
   res/MainMenu.nib/\* \
   $(NULL)
