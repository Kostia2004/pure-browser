From: Mike Hommey <mh@glandium.org>
Date: Sat, 19 Feb 2011 11:04:53 +0100
Subject: Modify search plugins depending on MOZ_APP_NAME

---
 browser/locales/Makefile.in                     | 3 +++
 browser/locales/en-US/searchplugins/answers.xml | 2 +-
 2 files changed, 4 insertions(+), 1 deletion(-)

diff --git a/browser/locales/Makefile.in b/browser/locales/Makefile.in
index b71de26..74bc21f 100644
--- a/browser/locales/Makefile.in
+++ b/browser/locales/Makefile.in
@@ -84,6 +84,9 @@ GARBAGE += $(list-txt)
 
 libs:: searchplugins
 
+DEFINES += -DMOZ_APP_NAME=$(MOZ_APP_NAME)
+
+
 # Required for l10n.mk - defines a list of app sub dirs that should
 # be included in langpack xpis.
 DIST_SUBDIRS = $(DIST_SUBDIR)
diff --git a/browser/locales/en-US/searchplugins/answers.xml b/browser/locales/en-US/searchplugins/answers.xml
index 4bd2fbf..e0fcec6 100644
--- a/browser/locales/en-US/searchplugins/answers.xml
+++ b/browser/locales/en-US/searchplugins/answers.xml
@@ -12,6 +12,6 @@
   <Param name="gwp" value="13"/>
 </Url>
 <Url type="application/x-suggestions+json" method="GET"
-     template="http://www.answers.com/main/startswith?output=json&amp;client=firefox&amp;s={searchTerms}"/>
+#expand     template="http://www.answers.com/main/startswith?output=json&amp;client=__MOZ_APP_NAME__&amp;s={searchTerms}"/>
 <SearchForm>http://www.answers.com/</SearchForm>
 </SearchPlugin>
