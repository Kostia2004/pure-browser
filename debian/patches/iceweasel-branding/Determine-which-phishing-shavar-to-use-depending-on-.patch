From: Mike Hommey <mh@glandium.org>
Date: Thu, 1 Apr 2010 15:34:59 +0200
Subject: Determine which phishing shavar to use depending on
 MOZ_OFFICIAL_BRANDING

---
 modules/libpref/src/init/all.js | 4 ++++
 modules/libpref/src/moz.build   | 2 ++
 2 files changed, 6 insertions(+)

diff --git a/modules/libpref/src/init/all.js b/modules/libpref/src/init/all.js
index f76c579..3db4c09 100644
--- a/modules/libpref/src/init/all.js
+++ b/modules/libpref/src/init/all.js
@@ -4188,7 +4188,11 @@ pref("dom.inter-app-communication-api.enabled", false);
 
 // The tables used for Safebrowsing phishing and malware checks.
 pref("urlclassifier.malware_table", "goog-malware-shavar,test-malware-simple");
+#ifdef MOZ_OFFICIAL_BRANDING
 pref("urlclassifier.phish_table", "goog-phish-shavar,test-phish-simple");
+#else
+pref("urlclassifier.phish_table", "googpub-phish-shavar,test-phish-simple");
+#endif
 pref("urlclassifier.downloadBlockTable", "");
 pref("urlclassifier.downloadAllowTable", "");
 pref("urlclassifier.disallow_completions", "test-malware-simple,test-phish-simple,goog-downloadwhite-digest256");
diff --git a/modules/libpref/src/moz.build b/modules/libpref/src/moz.build
index f863f76..c67679c 100644
--- a/modules/libpref/src/moz.build
+++ b/modules/libpref/src/moz.build
@@ -24,3 +24,5 @@ FINAL_LIBRARY = 'xul'
 
 DEFINES['OS_ARCH'] = CONFIG['OS_ARCH']
 DEFINES['MOZ_WIDGET_TOOLKIT'] = CONFIG['MOZ_WIDGET_TOOLKIT']
+if CONFIG['MOZ_OFFICIAL_BRANDING']:
+    DEFINES['MOZ_OFFICIAL_BRANDING'] = True
